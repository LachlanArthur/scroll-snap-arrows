{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["import { scrollSnapToNext, getScrollSnapPositions } from 'scroll-snap-api';\r\nexport class ScrollSnapArrows {\r\n    constructor(element) {\r\n        this.element = element;\r\n        this.arrows = {\r\n            left: [],\r\n            right: [],\r\n            up: [],\r\n            down: [],\r\n        };\r\n        this.directions = ['left', 'right', 'up', 'down'];\r\n        this.populateArrows();\r\n        this.addEventListeners();\r\n    }\r\n    populateArrows() {\r\n        for (const direction of this.directions) {\r\n            const dataAttribute = 'scrollSnapArrow' + (capitalize(direction));\r\n            const selector = this.element.dataset[dataAttribute];\r\n            if (selector) {\r\n                for (const arrow of document.querySelectorAll(selector)) {\r\n                    this.addArrow(direction, arrow);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    addEventListeners() {\r\n        this.element.addEventListener('scroll', debounce(this.updateArrows.bind(this), 100));\r\n    }\r\n    addArrow(direction, element) {\r\n        this.arrows[direction].push(element);\r\n        element.addEventListener('click', this.arrowOnClick.bind(this, direction));\r\n        this.updateArrows();\r\n    }\r\n    arrowOnClick(direction) {\r\n        scrollSnapToNext(this.element, direction);\r\n    }\r\n    updateArrows() {\r\n        const positions = getScrollSnapPositions(this.element);\r\n        const [positionsLeft, positionsRight] = bifurcate(positions.x, this.element.scrollLeft, 2);\r\n        const [positionsUp, positionsDown] = bifurcate(positions.y, this.element.scrollTop, 2);\r\n        this.toggleArrows('left', positionsLeft.length > 0);\r\n        this.toggleArrows('right', positionsRight.length > 0);\r\n        this.toggleArrows('up', positionsUp.length > 0);\r\n        this.toggleArrows('down', positionsDown.length > 0);\r\n    }\r\n    toggleArrows(direction, show) {\r\n        this.arrows[direction].forEach(arrow => arrow.hidden = !show);\r\n    }\r\n}\r\nfunction capitalize(text) {\r\n    if (text.length === 0)\r\n        return '';\r\n    return text.substr(0, 1).toUpperCase() + text.substr(1);\r\n}\r\nfunction debounce(fn, timeout) {\r\n    let old;\r\n    return (...args) => {\r\n        if (old) {\r\n            clearTimeout(old);\r\n        }\r\n        old = window.setTimeout(fn, timeout, ...args);\r\n    };\r\n}\r\nfunction bifurcate(items, midpoint, threshold = 0) {\r\n    const lesser = [];\r\n    const greater = [];\r\n    items.forEach(item => {\r\n        if (Math.abs(item - midpoint) <= threshold) {\r\n            return; // Too close\r\n        }\r\n        if (item < midpoint) {\r\n            lesser.push(item);\r\n        }\r\n        if (item > midpoint) {\r\n            greater.push(item);\r\n        }\r\n    });\r\n    return [lesser, greater];\r\n}\r\n"],"names":["ScrollSnapArrows","constructor","element","arrows","left","right","up","down","directions","populateArrows","addEventListeners","direction","dataAttribute","capitalize","selector","dataset","arrow","document","querySelectorAll","addArrow","addEventListener","debounce","updateArrows","bind","push","arrowOnClick","scrollSnapToNext","positions","getScrollSnapPositions","positionsLeft","positionsRight","bifurcate","x","scrollLeft","positionsUp","positionsDown","y","scrollTop","toggleArrows","length","show","forEach","hidden","text","substr","toUpperCase","fn","timeout","old","args","clearTimeout","window","setTimeout","items","midpoint","threshold","lesser","greater","item","Math","abs"],"mappings":"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"}