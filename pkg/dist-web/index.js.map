{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["import { scrollSnapToNext, getScrollSnapPositions } from 'scroll-snap-api';\r\nexport class ScrollSnapArrows {\r\n    constructor(element) {\r\n        this.element = element;\r\n        this.arrows = {\r\n            left: [],\r\n            right: [],\r\n            up: [],\r\n            down: [],\r\n        };\r\n        this.directions = ['left', 'right', 'up', 'down'];\r\n        this.populateArrows();\r\n        this.addEventListeners();\r\n    }\r\n    populateArrows() {\r\n        for (const direction of this.directions) {\r\n            const dataAttribute = 'scrollSnapArrow' + (capitalize(direction));\r\n            const selector = this.element.dataset[dataAttribute];\r\n            if (selector) {\r\n                for (const arrow of document.querySelectorAll(selector)) {\r\n                    this.addArrow(direction, arrow);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    addEventListeners() {\r\n        this.element.addEventListener('scroll', debounce(this.updateArrows.bind(this), 100));\r\n    }\r\n    addArrow(direction, element) {\r\n        this.arrows[direction].push(element);\r\n        element.addEventListener('click', this.arrowOnClick.bind(this, direction));\r\n        this.updateArrows();\r\n    }\r\n    arrowOnClick(direction) {\r\n        scrollSnapToNext(this.element, direction);\r\n    }\r\n    updateArrows() {\r\n        const positions = getScrollSnapPositions(this.element);\r\n        const [positionsLeft, positionsRight] = bifurcate(positions.x, this.element.scrollLeft, 2);\r\n        const [positionsUp, positionsDown] = bifurcate(positions.y, this.element.scrollTop, 2);\r\n        this.toggleArrows('left', positionsLeft.length > 0);\r\n        this.toggleArrows('right', positionsRight.length > 0);\r\n        this.toggleArrows('up', positionsUp.length > 0);\r\n        this.toggleArrows('down', positionsDown.length > 0);\r\n    }\r\n    toggleArrows(direction, show) {\r\n        this.arrows[direction].forEach(arrow => arrow.hidden = !show);\r\n    }\r\n}\r\nfunction capitalize(text) {\r\n    if (text.length === 0)\r\n        return '';\r\n    return text.substr(0, 1).toUpperCase() + text.substr(1);\r\n}\r\nfunction debounce(fn, timeout) {\r\n    let old;\r\n    return (...args) => {\r\n        if (old) {\r\n            clearTimeout(old);\r\n        }\r\n        old = window.setTimeout(fn, timeout, ...args);\r\n    };\r\n}\r\nfunction bifurcate(items, midpoint, threshold = 0) {\r\n    const lesser = [];\r\n    const greater = [];\r\n    items.forEach(item => {\r\n        if (Math.abs(item - midpoint) <= threshold) {\r\n            return; // Too close\r\n        }\r\n        if (item < midpoint) {\r\n            lesser.push(item);\r\n        }\r\n        if (item > midpoint) {\r\n            greater.push(item);\r\n        }\r\n    });\r\n    return [lesser, greater];\r\n}\r\n"],"names":[],"mappings":"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"}